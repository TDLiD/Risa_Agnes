<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Future Gallery - Lisa n Agnes</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/granim/2.0.0/granim.min.js"></script>
    <style>
        :root {
            --accent: #00ffa3;
            --glow: rgba(0, 255, 163, 0.4);
            --heart-red: #ff4d6d;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            color: white;
            font-family: 'Inter', sans-serif;
            background-color: #050507;
            perspective: 2000px;
            /* ë°”ë‘‘íŒ ëª¨ë“œì¼ ë•Œ ìŠ¤í¬ë¡¤ í—ˆìš©ì„ ìœ„í•´ ì²˜ë¦¬ */
            overflow-x: hidden;
            overflow-y: hidden; 
        }

        body.grid-mode {
            overflow-y: auto; /* ë°”ë‘‘íŒ ëª¨ë“œì¼ ë•Œë§Œ ìŠ¤í¬ë¡¤ í—ˆìš© */
        }

        /* 1. Granim ë°°ê²½ìš© ìº”ë²„ìŠ¤ */
        #canvas-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -2;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
            pointer-events: none;
        }

        /* ğŸŒ ìì „í•˜ëŠ” ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        #sphere-scene {
            position: absolute;
            top: 50%; left: 50%;
            width: 0; height: 0;
            transform-style: preserve-3d;
            animation: rotateEarth 30s linear infinite;
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ë°”ë‘‘íŒ ëª¨ë“œì¼ ë•Œ ì»¨í…Œì´ë„ˆ ì„¤ì • ë³€í™” */
        body.grid-mode #sphere-scene {
            animation-play-state: paused;
            transform: translate(-50%, 0) rotateX(0) rotateY(0) !important;
            top: 50px;
            height: auto;
            width: 90vw;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            perspective: none;
            transform-style: flat;
        }

        @keyframes rotateEarth {
            from { transform: translate(-50%, -50%) rotateX(-5deg) rotateY(0deg); }
            to { transform: translate(-50%, -50%) rotateX(-5deg) rotateY(360deg); }
        }

        /* ì‚¬ì§„ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .photo-card {
            position: absolute;
            width: 150px; height: 150px;
            left: -75px; top: -75px;
            object-fit: cover;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            backface-visibility: visible; 
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            filter: brightness(0.7);
        }

        /* ë°”ë‘‘íŒ ëª¨ë“œì¼ ë•Œ ì¹´ë“œ ìŠ¤íƒ€ì¼ ë³€í™” */
        body.grid-mode .photo-card {
            position: relative !important;
            left: 0 !important; top: 0 !important;
            transform: none !important;
            width: 100%;
            height: 200px;
            filter: brightness(1);
        }

        .photo-card:hover {
            filter: brightness(1.2);
            border-color: var(--accent);
            box-shadow: 0 0 30px var(--glow);
            z-index: 10000 !important;
            transform: scale(1.2) !important; 
        }

        /* â¤ï¸ í•˜ë‹¨ ì¤‘ì•™ í•˜íŠ¸ ë²„íŠ¼ */
        .bottom-nav {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10001;
        }

        #heart-btn {
            width: 60px;
            height: 60px;
            background: var(--heart-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 77, 109, 0.4);
            transition: all 0.3s;
            border: none;
        }

        #heart-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 77, 109, 0.8);
        }

        #heart-btn svg {
            width: 30px;
            height: 30px;
            fill: white;
        }

        /* í™•ëŒ€ ëª¨ë‹¬ */
        #modal {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999999;
            backdrop-filter: blur(15px);
            cursor: zoom-out;
        }

        #modal img {
            max-width: 85%; max-height: 85%;
            border: 2px solid var(--accent);
            box-shadow: 0 0 50px var(--glow);
            transform: scale(0.8);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #modal.active img { transform: scale(1); }

        /* ìƒë‹¨ UI */
        .nav { position: fixed; top: 20px; left: 20px; z-index: 10000; }
        .btn {
            padding: 10px 22px;
            border: 1px solid var(--accent);
            color: var(--accent);
            text-decoration: none;
            background: rgba(0,0,0,0.5);
            border-radius: 30px;
            font-weight: bold; font-size: 0.9rem;
            transition: all 0.3s;
            letter-spacing: 1px;
        }
        .btn:hover { background: var(--accent); color: black; box-shadow: 0 0 20px var(--glow); }
    </style>
</head>
<body>

    <canvas id="canvas-bg"></canvas>

    <nav class="nav"><a href="index.html" class="btn">â† EXIT GALLERY</a></nav>

    <div id="sphere-scene"></div>

    <div class="bottom-nav">
        <button id="heart-btn" title="Toggle Grid Mode">
            <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
        </button>
    </div>

    <div id="modal" onclick="closeModal()">
        <img id="modal-img" src="" alt="">
    </div>

<script>
    // 1. Granim.js ë°°ê²½ ì„¤ì •
    var granimInstance = new Granim({
        element: '#canvas-bg',
        direction: 'top-bottom',
        isPausedWhenNotInView: true,
        states : {
            "default-state": {
                gradients: [
                    ['#050507', '#1a0f2e'],
                    ['#0f172a', '#050507'],
                    ['#1e1b4b', '#0a0a12']
                ],
                transitionSpeed: 8000
            }
        }
    });

    const scene = document.getElementById('sphere-scene');
    const modal = document.getElementById('modal');
    const modalImg = document.getElementById('modal-img');
    const heartBtn = document.getElementById('heart-btn');
    
    const count = 37; 
    const radius = 450; 
    const cards = [];

    // ì‚¬ì§„ ì¹´ë“œ ìƒì„±
    for (let i = 0; i < count; i++) {
        const index = i + 1;
        const num = String(index).padStart(3, '0');
        const extension = index <= 19 ? 'jpg' : 'png';
        const src = `images/image-${num}.${extension}`;
        
        const img = document.createElement('img');
        img.src = src;
        img.className = 'photo-card';
        
        // í”¼ë³´ë‚˜ì¹˜ êµ¬ì²´ ì¢Œí‘œ ê³„ì‚°
        const phi = Math.acos(-1 + (2 * i) / count);
        const theta = Math.sqrt(count * Math.PI) * phi;

        const x = radius * Math.sin(phi) * Math.cos(theta);
        const y = radius * Math.sin(phi) * Math.sin(theta);
        const z = radius * Math.cos(phi);

        // ê¸°ë³¸ ë³€í™˜ ì €ì¥
        const baseTransform = `translate3d(${x}px, ${y}px, ${z}px) rotateY(${theta}rad) rotateX(${phi - Math.PI/2}rad)`;
        img.style.transform = baseTransform;
        img.dataset.sphereTransform = baseTransform; // ë³µì›ìš© ë°ì´í„° ì €ì¥

        img.onclick = (e) => {
            e.stopPropagation();
            openModal(src);
        };

        scene.appendChild(img);
        cards.push(img);
    }

    // ë°”ë‘‘íŒ ëª¨ë“œ í† ê¸€
    heartBtn.onclick = () => {
        document.body.classList.toggle('grid-mode');
        
        if (!document.body.classList.contains('grid-mode')) {
            // êµ¬ì²´ ëª¨ë“œë¡œ ë³µê·€ ì‹œ transform ì¬ì„¤ì •
            cards.forEach(card => {
                card.style.transform = card.dataset.sphereTransform;
            });
            window.scrollTo(0, 0);
        }
    };

    function openModal(src) {
        modalImg.src = src;
        modal.style.display = 'flex';
        setTimeout(() => modal.classList.add('active'), 10);
    }

    function closeModal() {
        modal.classList.remove('active');
        setTimeout(() => modal.style.display = 'none', 300);
    }

    // ë§ˆìš°ìŠ¤ íŒ¨ëŸ´ë™ìŠ¤ (êµ¬ì²´ ëª¨ë“œì¼ ë•Œë§Œ ì‘ë™)
    document.addEventListener('mousemove', (e) => {
        if (!document.body.classList.contains('grid-mode')) {
            const moveX = (e.pageX - window.innerWidth / 2) / 100;
            const moveY = (e.pageY - window.innerHeight / 2) / 100;
            scene.parentElement.style.perspectiveOrigin = `${50 + moveX}% ${50 + moveY}%`;
        }
    });
</script>
</body>
</html>
