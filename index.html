<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Future Hub</title>
    <script src="music/music_list.js"></script>
    <style>
        :root { --accent:#00ffa3; --glass: rgba(15, 23, 42, 0.7); --heart-red:#ff4d6d; }
        body { margin:0; background:#050507; color:white; font-family:'Inter',sans-serif; overflow:hidden; }
        
        /* 상단 고정 하트 네비게이션 */
        .top-nav { position:fixed; top:40px; left:50%; transform:translateX(-50%); display:flex; gap:60px; z-index:100; }
        .heart-link { text-align:center; text-decoration:none; color:white; transition:0.3s; }
        .heart-link:hover { transform:scale(1.1); }
        .heart-icon { width:80px; height:80px; margin-bottom:10px; transition: 0.3s; }
        .heart-link:hover .heart-icon { filter: drop-shadow(0 0 20px currentColor); }
        .heart-label { font-size:12px; font-weight:bold; letter-spacing:2px; color:var(--accent); }

        /* 하단 GIF 무한 루프 선반 */
        .bottom-shelf { position:fixed; bottom:0; width:100%; height:140px; background:linear-gradient(transparent, rgba(0,255,163,0.05)); overflow:hidden; border-top:1px solid rgba(0,255,163,0.2); z-index: 50; }
        .gif-track { display:flex; width:max-content; animation: slide 40s linear infinite; align-items: center; height:100%; padding-left: 20px; }
        .gif-track img { height:90px; margin:0 15px; border-radius:10px; opacity:0.6; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .gif-track img:hover { opacity: 1; border-color: var(--accent); transform: scale(1.05); }
        @keyframes slide { from { transform:translateX(0); } to { transform:translateX(-50%); } }

        /* 중앙 문구 */
        .main-title { position:absolute; top:45%; left:50%; transform:translate(-50%, -50%); text-align:center; pointer-events:none; }
        .main-title h1 { font-size:4rem; margin:0; letter-spacing:-2px; opacity:0.1; white-space: nowrap; }
        
        /* 음악 플레이어 스타일 */
        #player-container { 
            position: fixed; bottom: 170px; right: 30px; width: 280px; 
            background: var(--glass); backdrop-filter: blur(20px); 
            border: 1px solid rgba(0, 255, 163, 0.2); border-radius: 24px; 
            z-index: 1000; color: white; padding: 18px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }
        .player-header { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
        .now-playing-label { font-size: 8px; text-transform: uppercase; color: var(--accent); letter-spacing: 1px; }
        #track-name { font-size: 12px; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .controls { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 12px 0; }
        .controls button { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; cursor: pointer; height: 35px; border-radius: 10px; font-size: 10px; }
        .controls button:hover { background: rgba(0, 255, 163, 0.15); border-color: var(--accent); }
        .song-list { max-height: 60px; overflow-y: auto; font-size: 10px; background: rgba(0,0,0,0.2); border-radius: 10px; }
        .song-item { padding: 6px 10px; cursor: pointer; opacity: 0.6; }
        .song-item.active { opacity: 1; color: var(--accent); }
    </style>
</head>
<body>
    <div class="top-nav">
        <a href="old.html" class="heart-link" style="color: var(--heart-red);">
            <svg class="heart-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
            <div class="heart-label">OLD MEMORIES</div>
        </a>
        <a href="2026-02.html" class="heart-link" style="color: var(--accent);">
            <svg class="heart-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
            <div class="heart-label">2026 FEBRUARY</div>
        </a>
    </div>

    <div class="main-title">
        <h1>FUTURE GALLERY</h1>
        <p style="color:var(--accent); letter-spacing:5px; opacity: 0.5;">SELECT YOUR TIMELINE</p>
    </div>

    <div class="bottom-shelf">
        <div class="gif-track" id="gif-container"></div>
    </div>

    <div id="player-container">
        <div class="player-header">
            <div class="now-playing-container">
                <div class="now-playing-label">Now Playing</div>
                <div id="track-name">READY TO PLAY</div>
            </div>
        </div>
        <div class="controls">
            <button onclick="prevTrack()">◁◁</button>
            <button id="play-btn" onclick="togglePlay()">PLAY</button>
            <button onclick="stopTrack()">■</button>
            <button onclick="nextTrack()">▷▷</button>
        </div>
        <div class="song-list" id="playlist"></div>
        <audio id="bg-music"></audio>
    </div>

    <script>
        // 1. GIF 자동 로드 로직
        async function initGifs() {
            try {
                const response = await fetch('images/photos.json');
                const data = await response.json();
                const gifs = data.lisa_gifs; // photos.json에 정의한 리스트
                const container = document.getElementById('gif-container');
                
                // 무한 루프 효과를 위해 리스트를 두 번 반복해서 추가
                const displayList = [...gifs, ...gifs];
                
                displayList.forEach(name => {
                    const img = document.createElement('img');
                    img.src = `bg/lisa/${name}`; // 실제 경로: bg/lisa/image-xxx.gif
                    img.alt = "Lisa GIF";
                    img.onerror = () => img.remove(); // 파일 로드 실패 시 제거
                    container.appendChild(img);
                });
            } catch (e) { console.error("GIF 로딩 에러:", e); }
        }

        // 2. 음악 플레이어 로직
        const tracks = typeof EXTERNAL_TRACKS !== 'undefined' ? EXTERNAL_TRACKS : [];
        let currentIdx = 0;
        const audio = document.getElementById('bg-music');
        const trackNameDisplay = document.getElementById('track-name');
        const playlistEl = document.getElementById('playlist');
        const playBtn = document.getElementById('play-btn');

        function initPlayer() {
            if (tracks.length === 0) return;
            tracks.forEach((track, index) => {
                const item = document.createElement('div');
                item.className = `song-item ${index === currentIdx ? 'active' : ''}`;
                item.innerText = track.replace('.mp3', '').replace(/_/g, ' ');
                item.onclick = () => loadTrack(index);
                playlistEl.appendChild(item);
            });
            loadTrack(currentIdx, false);
        }

        function loadTrack(index, autoPlay = true) {
            currentIdx = index;
            audio.src = `music/${tracks[index]}`;
            trackNameDisplay.innerText = tracks[index].replace('.mp3', '').replace(/_/g, ' ');
            document.querySelectorAll('.song-item').forEach((item, i) => item.classList.toggle('active', i === index));
            if (autoPlay) audio.play();
            playBtn.innerText = autoPlay ? "PAUSE" : "PLAY";
        }

        function togglePlay() {
            if (audio.paused) { audio.play(); playBtn.innerText = "PAUSE"; }
            else { audio.pause(); playBtn.innerText = "PLAY"; }
        }
        function nextTrack() { loadTrack((currentIdx + 1) % tracks.length); }
        function prevTrack() { loadTrack((currentIdx - 1 + tracks.length) % tracks.length); }
        function stopTrack() { audio.pause(); audio.currentTime = 0; playBtn.innerText = "PLAY"; }
        audio.onended = nextTrack;

        // 실행
        window.onload = () => {
            initGifs();
            initPlayer();
        };
    </script>
</body>
</html>